# 项目规范

## 前言：规与矩

1963年在新疆阿斯坦纳地区的考古发现中，出土的一副震惊世界的《伏羲女娲图》。伏羲和女娲都是至今
7800年前的华夏始祖，是华夏民族的创世之神，图中女娲执规，伏羲执矩。

虽然这幅图出土自汉墓，但规矩的重要性却早已植入了人类的历史中。
人都有惰性，这是大自然赋予我们的本性，有一两次的妥协，你就会开始放逐自己。

`无规矩无以成方圆`，在一个出色的产品中，必定伴随着一定复杂的`规矩`。通俗一点，就是我们`lin-cms`的
项目代码和目录规范，接下来我们将花费一整节的内容去介绍我们的项目规范。

## 目录结构

以前每谈及java，笔者的第一反应就是`麻烦`，这个麻烦集中在两个点上：一、臃肿啰嗦的代码；二、繁陈复杂的目录结构。
后来笔者分别使用`python`，`php`以及`node.js`等语言完成过实际项目，在开发，测试，维护，运维等诸多环节中兜兜转转，
笔者忽然觉得`java`的`麻烦`实则是规范的精髓。

看似啰嗦的代码却恰巧代表了代码的严谨，复杂的目录结构也正好表明项目的工整。多层的组织降低了代码的耦合性，提高了
复用性，给重构和维护带来了极大的方便。

`lin-cms-java`的目录结构脱胎于市面上基础的spring-boot web项目，严格遵守MVC的代码组织，为了让项目更加严谨，我们
参考了阿里巴巴规约手册中的java内容，吸收了大量的既成规范。项目大体的目录结构如下：

```
demo/src/main/java/com/lin/cms/demo
├── api         // rest api 控制器
│   ├── cms
│   └── v1
├── bo          // business object 业务数据类
├── common      // 公共类库
├── configure   // 配置
├── dto         // data transform object 数据转换类
├── exception   // 异常处理
├── extensions  // 扩展
├── interceptor // 拦截器
├── mapper      // mybatis mapper
├── model       // 模型层
├── service     // 业务层
│   └── impl    // 业务实现
├── utils       // 工具类库
├── validator   // 校验器
└── vo          // view object 视图数据类
```

此时，你或许已经有些迷糊了，说好的MVC代码组织了，这简直就是走楼梯嘛。说到底MVC仅仅只是一种思想，一种数据流动的思想，
数据从V层(视图层)，流向C层(控制层)再流向M层(模型层)，经处理后数据再流回来。

因此在`lin-cms`中，我们要解决的核心问题就是如何**优雅**的控制数据的流动，抛开基础类库，工具类库，及其它配置类，
`lin-cms`剩下的几乎全是与数据流动相关的代码目录，其中包括vo、bo、dto、model(do)等诸多数据容器，还有api(controller)
控制数据的访问，以及mapper(dao)，service控制数据的查询与整合，它们相互交融，构建了一个个完整的数据流动回路。

接下来，我们详细解释一下每个目录的具体作用：

- api Rest API控制层，目录下均为控制器，是数据的出口和入口
- bo business object 业务数据类，用于业务操作中需要新建一个类存放数据
- common 公共的基础类库
- configure spring boot 的配置类
- dto data transform object 数据转换类，用于数据传输，主要在前端数据提交与校验
- exception 异常处理相关
- extensions 扩展库相关
- interceptor spring mvc 拦截器
- mapper mybatis mapper接口
- model 模型层文件，mybatis的DO数据容器
- service 业务层接口及其实现类
- utils 工具类库
- validator 数据校验器
- vo view object 视图数据类，用于控制器中需要新建一个类存放数据

以上的目录并非你自己的项目的最终目录，它只是`lin-cms`在诸多实践中的讨论与沉淀，希望它能为你在项目规范与开发上帮上一把。

## 规范


